
//Create User Accounts
function createAccount(email, password){ 
	firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
  		// Handle Errors here.
  		var errorCode = error.code;
  		var errorMessage = error.message;
  		console.log(errorCode);
  		//console.log("SUBMITTED");
  	})
	//if the userName already exists in the DataBase

	var myRef = firebase.database().ref('/users/');
	myRef.once('value').then(function(snapshot)
	{
		var data = snapshot.val();	
		console.log(data);
		if(data[emailToHeader(email)] !== undefined){
			

		}
		//If the user does not exist, create them on the DataBase!
		else{
  			addUser(emailToHeader(email), "blue");
  			//Create them a default momento
  			createMomento(default + emailToHeader(email));

		}
	})

};


 function emailToHeader(email){
 	return email.replace(".","*-*");
 }

 function addUser(userName, color){
	var myRef = firebase.database().ref('/users');
	myRef.update({[userName]: {color: color, momentos: {defaultMomento: userName}}});
}

function createMomento(momentoName){
	var myRef = firebase.database().ref('/data');
	myRef.update({[momentoName]: {0: 0}});
}



createAccount("bec4@test.com", "password");
